(()=>{"use strict";var t=JSON.parse(localStorage.getItem("myStorage"))||[];function e(){return t}function n(e){t=e,localStorage.setItem("myStorage",JSON.stringify(t))}var i=JSON.parse(localStorage.getItem("myGroups"))||[];function r(){return i}function o(t){i=t,localStorage.setItem("myGroups",JSON.stringify(i))}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function l(t){var e=function(t){if("object"!=a(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==a(e)?e:e+""}var s=function(){return t=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.body=e,this.id=n||this.generateUniqueId(),this.displayDiv=null,this.displayP=null,this.saveBtn=null,this.editBtn=null,this.removeBtn=null,this.displayInput=null,this.list=i},i=[{key:"generateUniqueId",value:function(){return"id-"+Date.now()+"-"+Math.floor(1e3*Math.random())}},{key:"display",value:function(){var t=this;this.displayDiv=document.createElement("div"),this.displayP=document.createElement("p"),this.saveBtn=document.createElement("button"),this.editBtn=document.createElement("button"),this.removeBtn=document.createElement("button"),this.list.appendChild(this.displayDiv),this.displayDiv.appendChild(this.displayP),this.displayDiv.appendChild(this.saveBtn),this.displayDiv.appendChild(this.editBtn),this.displayDiv.appendChild(this.removeBtn),this.displayDiv.classList.add("display-div"),this.displayDiv.dataset.id=this.id,this.displayP.textContent=this.body,this.saveBtn.textContent="save",this.editBtn.textContent="edit",this.removeBtn.textContent="X",this.removeBtn.addEventListener("click",(function(){t.displayDiv.remove();var i=e();n(i=i.filter((function(e){return e.id!=t.id})))})),this.editBtn.addEventListener("click",(function(){t.edit(t.displayDiv,t.displayP)})),this.saveBtn.addEventListener("click",(function(){t.save(t.displayDiv)}))}},{key:"edit",value:function(t,e){return this.displayInput=document.createElement("input"),this.displayInput.value=e.textContent,t.prepend(this.displayInput),e.remove(),this.displayInput}},{key:"save",value:function(t){var i=this;this.displayP=document.createElement("p"),this.displayP.textContent=this.displayInput.value,t.prepend(this.displayP),this.displayInput.remove(),this.body=this.displayInput.value;var r=e(),o=r.find((function(t){return t.id===i.id}));o&&(o.body=this.body,n(r))}}],i&&d(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,i}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,p(i.key),i)}}function p(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}var v=document.getElementById("list-groups"),f=document.getElementById("add-group"),y=document.getElementById("show-hide-btn"),h=document.getElementById("add-list-item"),m=document.getElementById("list-item-input"),g=document.getElementById("save-btn"),b=document.getElementById("clear-btn"),E=document.getElementById("list"),B=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.generateGroupName(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=e,this.id=n||this.generateUniqueId(),this.groupDiv=null,this.groupP=null,this.saveBtn=null}return e=t,n=[{key:"generateUniqueId",value:function(){return"group-"+Date.now()+"-"+Math.floor(1e3*Math.random())}},{key:"displayGroup",value:function(t){this.groupDiv=document.createElement("div"),this.groupP=document.createElement("p"),this.groupDiv.dataset.id=this.id,this.groupDiv.classList.add("group-div"),this.groupP.textContent=this.title,this.saveBtn=document.createElement("button"),this.saveBtn.textContent="save",this.groupDiv.appendChild(this.groupP),this.groupDiv.appendChild(this.saveBtn),t.appendChild(this.groupDiv),this.groupDiv.draggable=!0}}],i=[{key:"updateGroupCounter",value:function(){return document.querySelectorAll(".group-div").length}},{key:"generateGroupName",value:function(){var e=t.updateGroupCounter();return"Untitled-".concat(e+1)}}],n&&c(e.prototype,n),i&&c(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();function S(){var t=document.querySelectorAll(".group-div");f.style.display=t.length>0?"block":"none"}y.addEventListener("click",(function(){"none"===h.style.display||""===h.style.display?(h.style.display="flex",y.textContent="Don't add new item"):(h.style.display="none",y.textContent="Add new item")})),b.addEventListener("click",(function(){m.value=""})),g.addEventListener("click",(function(){var t=new s(m.value,null,E),i=e();i.push({body:t.body,id:t.id}),n(i),t.display(),I(),function(){if(!w){w=!0;var t=new B;t.displayGroup(v);var e=r();e.push({title:t.title,id:t.id}),o(e),S()}}()}));var D=null;function I(){document.querySelectorAll(".display-div").forEach((function(t){t.draggable=!0,t.addEventListener("dragstart",(function(t){D=t.target}))})),E.addEventListener("dragstart",(function(t){D=t.target.closest(".display-div"),t.dataTransfer.effectAllowed="move"})),E.addEventListener("dragover",(function(t){t.preventDefault(),t.dataTransfer.dropEffect="move"})),E.addEventListener("drop",(function(t){if(t.preventDefault(),t.target.closest(".display-div")){var i=t.target.closest(".display-div");D!==i&&(function(t,i){Array.from(E.children).indexOf(t)>Array.from(E.children).indexOf(i)?E.insertBefore(t,i):E.insertBefore(t,i.nextSibling);var r=t.dataset.id,o=i.dataset.id,a=e().find((function(t){return t.id===r})),d=e().findIndex((function(t){return t.id===o})),l=e();l.splice(l.indexOf(a),1),l.splice(d,0,a),n(l)}(D,i),n(e()))}}))}var w=!1;f.addEventListener("click",(function(){var t=new B;t.displayGroup(v);var e=r();e.push({title:t.title,id:t.id}),o(e),S()})),e().forEach((function(t){new s(t.body,t.id,E).display(v)})),r().forEach((function(t){var e=new B(t.title,t.id);console.log(e),e.displayGroup(v)})),I(),document.querySelectorAll(".group-div").forEach((function(t){t.draggable=!0,t.addEventListener("dragstart",(function(t){D=t.target}))})),v.addEventListener("dragstart",(function(t){D=t.target.closest(".group-div"),t.dataTransfer.effectAllowed="move"})),v.addEventListener("dragover",(function(t){t.preventDefault(),t.dataTransfer.dropEffect="move"})),v.addEventListener("drop",(function(t){if(t.preventDefault(),t.target.closest(".group-div")){var e=t.target.closest(".group-div");D!==e&&(function(t,e){Array.from(v.children).indexOf(t)>Array.from(v.children).indexOf(e)?v.insertBefore(t,e):v.insertBefore(t,e.nextSibling);var n=t.dataset.id,i=e.dataset.id,a=r().find((function(t){return t.id===n})),d=r().findIndex((function(t){return t.id===i})),l=r();l.splice(l.indexOf(a),1),l.splice(d,0,a),o(l)}(D,e),o(r()))}})),S(),console.log(e()),console.log(r())})();
//# sourceMappingURL=bundle.js.map